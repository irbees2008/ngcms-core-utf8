# =========================================================================== #
# NG CMS // РџР»Р°РіРёРЅС‹ // AJAX Based Р§Р°С‚                                         #
# =========================================================================== #

РџР»Р°РіРёРЅ РїРѕР·РІРѕР»СЏРµС‚ РґРѕР±Р°РІРёС‚СЊ WEB С‡Р°С‚ РЅР° СЃС‚СЂР°РЅРёС†Р°С… РІР°С€РµРіРѕ СЃР°Р№С‚Р°, РїСЂРё СЌС‚РѕРј
РѕР±РЅРѕРІР»РµРЅРёРµ С‡Р°С‚Р° РїСЂРѕРёСЃС…РѕРґРёС‚ СЃ РёСЃРїРѕР»СЊР·РѕРІР°РЅРёРµРј С‚РµС…РЅРѕР»РѕРіРёР№ AJAX Рё JSON, С‡С‚Рѕ РїРѕР·РІРѕР»СЏРµС‚
Р·РЅР°С‡РёС‚РµР»СЊРЅРѕ СЌРєРѕРЅРѕРјРёС‚СЊ С‚СЂР°С„РёРє, РїРµСЂРµРґР°РІР°РµРјС‹Р№ РєР»РёРµРЅС‚Сѓ.

РћСЃРЅРѕРІРЅС‹Рµ РѕСЃРѕР±РµРЅРЅРѕСЃС‚Рё:
* РЈРїСЂР°РІР»РµРЅРёРµ РїСЂР°РІРёР»Р°РјРё РґРѕСЃС‚СѓРїР° РґР»СЏ РіРѕСЃС‚РµР№ (РґРѕСЃС‚СѓРї Р·Р°РїСЂРµС‰РµРЅ / С‚РѕР»СЊРєРѕ РїСЂРѕСЃРјРѕС‚СЂ /
  РїСЂРѕСЃРјРѕС‚СЂ + СЃРѕР±СЃС‚РІРµРЅРЅС‹Рµ РїРѕСЃС‚С‹)
* РЈРїСЂР°РІР»РµРЅРёРµ РїРµСЂРёРѕРґРѕРј РѕР±РЅРѕРІР»РµРЅРёСЏ С‡Р°С‚-СЃС‚СЂР°РЅРёС†С‹ Сѓ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ.
  Р РµРєРѕРјРµРЅРґРѕРІР°РЅРЅРѕРµ Р·РЅР°С‡РЅРёРµ: РѕР±РЅРѕРІР»РµРЅРёРµ РєР°Р¶РґС‹Рµ 30 СЃРµРєСѓРЅРґ
* РЈРїСЂР°РІР»РµРЅРёРµ РєРѕР»-РІРѕРј СЃРѕРѕР±С‰РµРЅРёР№, РѕС‚РѕР±СЂР°Р¶Р°РµРјС‹С… РІ РёСЃС‚РѕСЂРёРё СЃРѕРѕР±С‰РµРЅРёР№ РІ С‡Р°С‚Рµ
* Р—Р°С‰РёС‚Р° РѕС‚ С„Р»СѓРґР°
* Р’РѕР·РјРѕР¶РЅРѕСЃС‚СЊ РѕСЃС‚Р°РЅРѕРІРєРё РѕР±РЅРѕРІР»РµРЅРёР№ С‡Р°С‚Р° РІ СЃР»СѓС‡Р°Рµ, РµСЃР»Рё РїРѕР»СЊРІР°С‚РµР»СЊРЅРѕ РЅРµ РѕСЃС‚Р°РІР»СЏР»
  СЃРІРѕРёС… СЃРѕРѕР±С‰РµРЅРёР№ РІ Р·Р°РґР°РЅРЅС‹С… РїРµСЂРёРѕРґ (Р·Р°С‰РёС‚Р° РѕС‚ СЃРёС‚СѓР°С†РёРё, РєРѕРіРґР° РїРѕР»СЊР·РѕРІР°С‚РµР»СЊ РѕС‚РєСЂС‹РІР°РµС‚
  Рё РЅРµ РѕР±РЅРѕРІР»СЏРµС‚ СЃС‚СЂР°РЅРёС†Сѓ РІ С‚РµС‡РµРЅРёРё РѕС‡РµРЅСЊ РґРѕР»РіРѕРіРѕ РІСЂРµРјРµРЅРё, Рє РїСЂРёРјРµСЂСѓ - РјРѕР¶РµС‚ РґРµСЂР¶Р°С‚СЊ
  РѕС‚РєСЂС‹С‚РѕР№ СЃС‚СЂР°РЅРёС†Сѓ СЃ С‡Р°С‚РѕРј РІ С‚РµС‡РµРЅРёРё СЃСѓС‚РѕРє РёР»Рё РґР°Р¶Рµ РЅРµРґРµР»СЊ).
  Р РµРєРѕРјРµРЅРґРѕРІР°РЅРЅРѕРµ Р·РЅР°С‡РµРЅРёРµ: 1200 СЃРµРєСѓРЅРґ (С‚.Рµ. 20 РјРёРЅСѓС‚)
* РђРІС‚РѕСЂР°Р·РґРµР»РµРЅРёРµ РґР»РёРЅРЅС‹С… СЃР»РѕРІ. РќРµРѕР±С…РѕРґРёРјРѕ РґР»СЏ С‚РѕРіРѕ, С‡С‚РѕР±С‹ РґРёР·Р°Р№РЅ С‡Р°С‚Р° РЅРµ "РїР»С‹Р»" РїСЂРё 
  РЅР°РїРёСЃР°РЅРёРё СЃР»РёС€РєРѕРј РґР»РёРЅРЅС‹С… СЃР»РѕРІ. РџСЂРё Р°РєС‚РёРІР°С†РёРё РґР°РЅРЅРѕР№ С„СѓРЅРєС†РёРё РІ СЃР»РёС€РєРѕРј РґР»РёРЅРЅС‹Рµ СЃР»РѕРІР°
  Р±СѓРґСѓС‚ РІСЃС‚Р°РІР»СЏС‚СЊСЃСЏ РїСЂРѕР±РµР»С‹
* Р—Р°РґР°РЅРёРµ РјР°РєСЃРёРјР°Р»СЊРЅРѕРіРѕ СЂР°Р·РјРµСЂР° (РІ СЃРёРјРІРѕР»Р°С…) СЃРѕРѕР±С‰РµРЅРёСЏ
* РњРёРЅРёРјР°Р»СЊРЅС‹Р№ С‚СЂР°С„РёРє: РїСЂРё РѕС‚СЃСѓС‚СЃС‚РІРёРё РЅРѕРІС‹С… РєРѕРјРјРµРЅС‚Р°СЂРёРµРІ РїРѕР»СЊР·РѕРІР°С‚РµР»СЊ РїРѕР»СѓС‡Р°РµС‚ РІСЃРµРіРѕ
  РѕРєРѕР»Рѕ 20 Р±Р°Р№С‚ (+HTTP Р·Р°РіРѕР»РѕРІРєРё) РёРЅС„РѕСЂРјР°С†РёРё, РїСЂРё РЅР°Р»РёС‡РёРё РЅРѕРІС‹С… РєРѕРјРјРµРЅС‚Р°СЂРёРµРІ - РїРѕР»СЊР·РѕРІР°С‚РµР»СЊ
  РїРѕР»СѓС‡Р°РµС‚ С‚РѕР»СЊРєРѕ РёС…
* РћС‚РѕР±СЂР°Р¶РµРЅРёРµ РєР°Рє РІ Р±РѕРєРѕРІРѕР№ РїР°РЅРµР»Рё С‚Р°Рє Рё РЅР° СЃРѕР±СЃС‚РІРµРЅРЅРѕР№ СЃС‚СЂР°РЅРёС‡РєРµ
* РЎРѕР±СЃС‚РІРµРЅРЅР°СЏ СЃС‚СЂР°РЅРёС†Р° РјРѕР¶РµС‚ Р±С‹С‚СЊ РєР°Рє РІРЅСѓС‚СЂРё РґРёР·Р°Р№РЅР° СЃР°Р№С‚Р°, С‚Р°Рє Рё РїРѕР»РЅРѕСЃС‚СЊСЋ РѕС‚РґРµР»СЊРЅРѕ



РћС‚РѕР±СЂР°Р¶РµРЅРёРµ РїР»Р°РіРёРЅР°:
--------------------------------------------------------------------
Р—Р° РІС‹РІРѕРґ С‡Р°С‚Р° РѕС‚РІРµС‡Р°РµС‚ РїРµСЂРµРјРµРЅРЅР°СЏ {plugin_jchat}, РєРѕС‚РѕСЂР°СЏ РґРѕСЃС‚СѓРїРЅР° РІ С€Р°Р±Р»РѕРЅРµ main.tpl
Р—Р° РѕС‚РѕР±СЂР°Р¶РµРЅРёРµ СЃРѕРґРµСЂР¶РёРјРѕРіРѕ С‡Р°С‚Р° РѕС‚РІРµС‡Р°РµС‚ С€Р°Р±Р»РѕРЅ jchat.tpl



[Р’РќР�РњРђРќР�Р•!]
РЁР°Р±Р»РѕРЅ СЃРѕРґРµСЂР¶РёС‚ РЅРµ С‚РѕР»СЊРєРѕ РґРёР·Р°Р№РЅ-С‡Р°СЃС‚СЊ, РЅРѕ Рё РЅРµРѕР±С…РѕРґРёРјС‹Рµ РґР»СЏ СЂР°Р±РѕС‚С‹ JScript'С‹!
Р’ СЃР°РјРѕРј С€Р°Р±Р»РѕРЅРµ РІ HTML РєРѕРјРјРµРЅС‚Р°СЂРёСЏС… СѓРєР°Р·Р°РЅРѕ РєР°РєРёРµ Р±Р»РѕРєРё РјРѕР¶РЅРѕ Р° РєР°РєРёРµ РєСЂР°Р№РЅРµ 
РЅРµР¶РµР»Р°С‚РµР»СЊРЅРѕ (РµСЃР»Рё РІС‹ РЅРµ РѕСЃРѕР·РЅР°С‘С‚Рµ РїРѕСЃР»РµРґСЃС‚РІРёР№ РёР·РјРµРЅРµРЅРёР№) РјРµРЅСЏС‚СЊ.

Р”Р»СЏ РѕСЃРѕР±Рѕ РёРЅС‚РµСЂРµСЃСѓСЋС‰РёС…СЃСЏ - С„РѕСЂРјР°С‚ СЃС‚СЂРѕРєРё С‡Р°С‚Р° РѕРїСЂРµРґРµР»СЏРµС‚СЃСЏ РІ С€Р°Р±Р»РѕРЅРµ tpl/jchat.script.header.js, СЃС‚СЂРѕРєРё #125-139:
// **                                                                  **
// ** NOTIFICATION FOR ADMIN                                           **
// ** YOU CAN MAKE CHANGES IN THIS LINE TO CHANGE VIEW OF jChat RECORD **
// **                                                                  **
cell.innerHTML = 
	// 1. РџРѕР»Рµ РґР»СЏ РѕС‚РѕР±СЂР°Р¶РµРЅРёСЏ РґР°С‚С‹&РІСЂРµРјРµРЅРё Р·Р°РїРёСЃРё (СЃРѕ СЃС‚РёР»РµРј float: right)
	'<div style="float: right; font-size: 75%;" title="'+rec['datetime']+'">'+rec['time']+'</div>'+
	// 2. Р�Р·РѕР±СЂР°Р¶РµРЅРёРµ-РїСЂРёР·РЅР°Рє Р·Р°СЂРµРіРёСЃС‚СЂРёСЂРѕРІР°РЅРЅРѕРіРѕ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ, РѕРЅРѕ С‚Р°РєР¶Рµ СЏРІР»СЏРµС‚СЃСЏ СЃСЃС‹Р»РєРѕР№ РЅР° РїСЂРѕС„РёР»СЊ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ (РµСЃР»Рё РІРєР»СЋС‡РµРЅ РїР»Р°РіРёРЅ uprofile)
	((rec['author_id']>0)?('[isplugin uprofile]<a target="_blank" href="'+rec['profile_link']+'">[/isplugin]<img src="{skins_url}/images/profile.png" width="13" height="13" border="0"/>[isplugin uprofile]</a>[/isplugin] '):'')+
	// 3. Р�РјСЏ Р°РІС‚РѕСЂР° [Р¶РёСЂРЅС‹Рј, РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ СЃРїРµС†РёР°Р»СЊРЅС‹Р№ РєР»Р°СЃСЃ jchat_userName РґР»СЏ Р°РІС‚РѕРІСЃС‚Р°РІРєРё РёРјРµРЅРё]
	'<span class="jchat_userName">'+rec['author']+'</span>'+
	// 4. РџРµСЂРµС…РѕРґ РЅР° РЅРѕРІСѓСЋ СЃС‚СЂР°РЅРёС†Сѓ
	'<br/> '+
	// 5. РЎР°Рј С‚РµРєСЃС‚ СЃРѕРѕР±С‰РµРЅРёСЏ
	rec['text'];

