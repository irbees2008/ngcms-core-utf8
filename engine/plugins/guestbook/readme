# =========================================================================== #
# NG CMS // РџР»Р°РіРёРЅС‹ // guestbook                                           #
# =========================================================================== #

РџР»Р°РіРёРЅ РїРѕР·РІРѕР»СЏРµС‚ РѕСЂРіР°РЅРёР·РѕРІР°С‚СЊ РЅР° СЃР°Р№С‚Рµ РіРѕСЃС‚РµРІСѓСЋ РєРЅРёРіСѓ.

РџСЂРё Р°РєС‚РёРІР°С†РёРё РїР»Р°РіРёРЅР° СЃС‚Р°РЅРѕРІРёС‚СЃСЏ РґРѕСЃС‚СѓРїРЅР° СЃС‚СЂР°РЅРёС†Р° РїР»Р°РіРёРЅР°: /plugin/guestbook/

РќР°СЃС‚СЂРѕР№РєР° РїР»Р°РіРёРЅР°
=====================

[TWIG] guestbook.list.tpl
------------------------------------------------
РЁР°Р±Р»РѕРЅ РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ РґР»СЏ РІС‹РІРѕРґР° СЃРїРёСЃРєР° Р·Р°РїРёСЃРµР№ РіРѕСЃС‚РµРІРѕР№ РєРЅРёРіРё Рё С„РѕСЂРјС‹ РґРѕР±Р°РІР»РµРЅРёСЏ Р·Р°РїРёСЃРё.

РЎРїРёСЃРѕРє РїРµСЂРµРјРµРЅРЅС‹С…:

  * entries - РјР°СЃСЃРёРІ, СЃРѕРґРµСЂР¶Р°С‰РёР№ Р·Р°РїРёСЃРё РіРѕСЃС‚РµРІРѕР№ РєРЅРёРіРё:
    * id            - ID Р·Р°РїРёСЃРё
    * comnum        - РїРѕСЂСЏРґРєРѕРІС‹Р№ РЅРѕРјРµСЂ Р·Р°РїРёСЃРё
    * date          - РґР°С‚Р° РїСѓР±Р»РёРєР°С†РёРё Р·Р°РїРёСЃРё (РІ С„РѕСЂРјР°С‚Рµ, СѓРєР°Р·Р°РЅРЅРѕРј РІ РЅР°СЃС‚СЂРѕР№РєР°С… РїР»Р°РіРёРЅР°)
    * message       - С‚РµРєСЃС‚ Р·Р°РїРёСЃРё
    * answer        - РѕС‚РІРµС‚ Р°РґРјРёРЅРёСЃС‚СЂР°С‚РѕСЂР°
    * author        - Р»РѕРіРёРЅ Р°РІС‚РѕСЂР° Р·Р°РїРёСЃРё, Р»РёР±Рѕ guest (РіРѕСЃС‚СЊ)
    * ip            - ip-Р°РґСЂРµСЃ Р°РІС‚РѕСЂР° Р·Р°РїРёСЃРё
    * edit          - СЃСЃС‹Р»РєР° РЅР° СЂРµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ Р·Р°РїРёСЃРё (РґР»СЏ Р°РґРјРёРЅРёСЃС‚СЂР°С‚РѕСЂР°)
    * del           - СЃСЃС‹Р»РєР° РЅР° СѓРґР°Р»РµРЅРёРµ Р·Р°РїРёСЃРё (РґР»СЏ Р°РґРјРёРЅРёСЃС‚СЂР°С‚РѕСЂР°)
    * fields        - РјР°СЃСЃРёРІ СЃ Р·Р°РїРѕР»РЅРµРЅРЅС‹РјРё РґР°РЅРЅС‹РјРё РґРѕРї. РїРѕР»РµР№ Р·Р°РїРёСЃРё (РєР»СЋС‡ - id РїРѕР»СЏ):
      * id          - id РїРѕР»СЏ
      * name        - РЅР°Р·РІР°РЅРёРµ РїРѕР»СЏ
      * value       - Р·РЅР°С‡РµРЅРёРµ РїРѕР»СЏ
    * social        - РјР°СЃСЃРёРІ СЃ РґР°РЅРЅС‹РјРё СЃРѕС†СЃРµС‚РµР№ (РєР»СЋС‡ - РЅР°Р·РІР°РЅРёРµ: Vkontakte, Facebook, Google, Instagram):
      * link        - СЃСЃС‹Р»РєР° РЅР° РїСЂРѕС„РёР»СЊ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ
      * photo       - СЃСЃС‹Р»РєР° РЅР° Р°РІР°С‚Р°СЂ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ

  * fields  - РјР°СЃСЃРёРІ РІСЃРµС… РґРѕРї. РїРѕР»РµР№ РіРѕСЃС‚РµРІРѕР№ РєРЅРёРіРё (РєР»СЋС‡ - id РїРѕР»СЏ):
    * id            - id РїРѕР»СЏ,
    * name          - РЅР°Р·РІР°РЅРёРµ РїРѕР»СЏ;
    * placeholder   - Р·Р°РїРѕР»РЅРёС‚РµР»СЊ РїРѕР»СЏ;
    * default_value - Р·РЅР°С‡РµРЅРёРµ РїРѕР»СЏ РїРѕ СѓРјРѕР»С‡Р°РЅРёСЋ;
    * required      - СЏРІР»СЏРµС‚СЃСЏ Р»Рё РїРѕР»Рµ РѕР±СЏР·Р°С‚РµР»СЊРЅС‹Рј;

  * total_count     - РѕР±С‰РµРµ РєРѕР»РёС‡РµСЃС‚РІРѕ Р·Р°РїРёСЃРµР№ РІ РіРѕСЃС‚РµРІРѕР№ РєРЅРёРіРµ
  * perpage         - РєРѕР»РёС‡РµСЃС‚РІРѕ Р·Р°РїРёСЃРµР№, РѕС‚РѕР±СЂР°Р¶Р°РµРјС‹С… РЅР° РѕРґРЅРѕР№ СЃС‚СЂР°РЅРёС†Рµ
  * errors          - СЃРѕРѕР±С‰РµРЅРёСЏ РѕР± РѕС€РёР±РєР°С…
  * success         - СЃРѕРѕР±С‰РµРЅРёСЏ РѕР± СѓСЃРїРµС€РЅС‹С… РґРµР№СЃС‚РІРёСЏС…
  * smilies         - СЃРјР°Р№Р»С‹
  * bbcodes         - BB-РєРѕРґС‹
  * ip              - ip-Р°РґСЂРµСЃ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ (РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ РїСЂРё РїСѓР±Р»РёРєР°С†РёРё Р·Р°РїРёСЃРё)
  * use_captcha     - true, РµСЃР»Рё РєР°РїС‡Р° РІРєР»СЋС‡РµРЅР°
  * use_guests      - true, РµСЃР»Рё СЂР°Р·СЂРµС€РµРЅРѕ РґРѕР±Р°РІР»СЏС‚СЊ Р·Р°РїРёСЃРё Р±РµР· РІС…РѕРґР° РЅР° СЃР°Р№С‚
  * pages           - РІРёРґР¶РµС‚ РїРѕСЃС‚СЂР°РЅРёС‡РЅРѕР№ РЅР°РІРёРіР°С†РёРё

[TWIG] guestbook.edit.tpl
------------------------------------------------
РЁР°Р±Р»РѕРЅ РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ РґР»СЏ СЂРµРґР°РєС‚РёСЂРѕРІР°РЅРёСЏ Р·Р°РїРёСЃРё Р±РµР· РІС…РѕРґР° РІ Р°РґРјРёРЅРєСѓ.
РџСЂРµРґРѕСЃС‚Р°РІР»СЏРµС‚ СѓСЂРµР·Р°РЅРЅС‹Рµ РІРѕР·РјРѕР¶РЅРѕСЃС‚Рё - РІ С‡Р°СЃС‚РЅРѕСЃС‚Рё, РЅРµР»СЊР·СЏ СЂРµРґР°РєС‚РёСЂРѕРІР°С‚СЊ РґР°РЅРЅС‹Рµ СЃРѕС†СЃРµС‚РµР№.

РЎРїРёСЃРѕРє РїРµСЂРµРјРµРЅРЅС‹С…:

  * id              - ID Р·Р°РїРёСЃРё
  * author          - Р»РѕРіРёРЅ Р°РІС‚РѕСЂР° Р·Р°РїРёСЃРё, Р»РёР±Рѕ guest (РіРѕСЃС‚СЊ)
  * message         - С‚РµРєСЃС‚ Р·Р°РїРёСЃРё
  * answer          - РѕС‚РІРµС‚ Р°РґРјРёРЅРёСЃС‚СЂР°С‚РѕСЂР°
  * error           - СЃРѕРѕР±С‰РµРЅРёСЏ РѕР± РѕС€РёР±РєР°С…
  * fields  - РјР°СЃСЃРёРІ РІСЃРµС… РґРѕРї. РїРѕР»РµР№ Р·Р°РїРёСЃРё (РєР»СЋС‡ - id РїРѕР»СЏ)
    * id            - id РїРѕР»СЏ
    * name          - РЅР°Р·РІР°РЅРёРµ РїРѕР»СЏ
    * placeholder   - Р·Р°РїРѕР»РЅРёС‚РµР»СЊ РїРѕР»СЏ
    * default_value - Р·РЅР°С‡РµРЅРёРµ РїРѕР»СЏ РїРѕ СѓРјРѕР»С‡Р°РЅРёСЋ
    * required      - СЏРІР»СЏРµС‚СЃСЏ Р»Рё РїРѕР»Рµ РѕР±СЏР·Р°С‚РµР»СЊРЅС‹Рј
    * value         - Р·РЅР°С‡РµРЅРёРµ, СѓРєР°Р·Р°РЅРЅРѕРµ Р°РІС‚РѕСЂРѕРј Р·Р°РїРёСЃРё

[TWIG] guestbook.block.tpl
------------------------------------------------
РЁР°Р±Р»РѕРЅ РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ РґР»СЏ РІС‹РІРѕРґР° Р±Р»РѕРєР° РїРѕСЃР»РµРґРЅРёС… Р·Р°РїРёСЃРµР№ РІ main.tpl.
Р—Р°РїРёСЃРё СЃРѕРґРµСЂР¶Р°С‚СЃСЏ РІ РїРµСЂРµРјРµРЅРЅРѕР№ entries, СЃС‚СЂСѓРєС‚СѓСЂР° РїРѕРґРѕР±РЅР° С€Р°Р±Р»РѕРЅСѓ guestbook.list.tpl

Р”Р»СЏ РІС‹РІРѕРґР° Р±Р»РѕРєР° РёСЃРїРѕР»СЊР·РѕРІР°С‚СЊ РєРѕРЅСЃС‚СЂСѓРєС†РёСЋ:

  {{ callPlugin('guestbook.show', {'count': '2'}) }}

РіРґРµ count - РЅРµРѕР±С…РѕРґРёРјРѕРµ РєРѕР»РёС‡РµСЃС‚РІРѕ Р·Р°РїРёСЃРµР№.

РќР°СЃС‚СЂРѕР№РєРё Р§РџРЈ
---------------------

Р’С‹ РјРѕР¶РµС‚Рµ СѓРєР°Р·Р°С‚СЊ СЃРѕР±СЃС‚РІРµРЅРЅС‹Рµ Р°РґСЂРµСЃР° СЃС‚СЂР°РЅРёС† РїР»Р°РіРёРЅР°. Р”Р»СЏ СЌС‚РѕРіРѕ РЅРµРѕР±С…РѕРґРёРјРѕ:
  1. РІРєР»СЋС‡РёС‚СЊ Р§РџРЈ РІ РЅР°СЃС‚СЂРѕР№РєР°С… РїР»Р°РіРёРЅР°,
  2. РїСЂРѕРїРёСЃР°С‚СЊ РїР°СЂР°РјРµС‚СЂС‹ URL РґР»СЏ РїР»Р°РіРёРЅР° guestbook РІ "РЈРїСЂР°РІР»РµРЅРёРµ С„РѕСЂРјР°С‚РѕРј СЃСЃС‹Р»РѕРє".

РџСЂРёРјРµСЂ:

guestbook   edit    Р РµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ    /guestbook/edit/{id}
guestbook           Р“РѕСЃС‚РµРІР°СЏ РєРЅРёРіР°    /guestbook/[{page}/][{act}]

Р“РґРµ:
  - {id}      РґР»СЏ СЃС‚СЂР°РЅРёС†С‹ СЂРµРґР°РєС‚РёСЂРѕРІР°РЅРёСЏ: ID СЂРµРґР°РєС‚РёСЂСѓРµРјРѕР№ Р·Р°РїРёСЃРё
  - {page}    РґР»СЏ СЃС‚СЂР°РЅРёС†С‹ СЃРїРёСЃРєР° Р·Р°РїРёСЃРµР№: РЅРѕРјРµСЂ СЃС‚СЂР°РЅРёС†С‹
  - {act}     РґР»СЏ СЃС‚СЂР°РЅРёС†С‹ СЃРїРёСЃРєР° Р·Р°РїРёСЃРµР№: СѓСЃРїРµС€РЅРѕ РІС‹РїРѕР»РЅРµРЅРѕ РґРµР№СЃС‚РІРёРµ (add = Р·Р°РїРёСЃСЊ РґРѕР±Р°РІР»РµРЅР°, upd = Р·Р°РїРёСЃСЊ РѕС‚СЂРµРґР°РєС‚РёСЂРѕРІР°РЅР°, del = Р·Р°РїРёСЃСЊ СѓРґР°Р»РµРЅР°)

РќР°СЃС‚СЂРѕР№РєРё РїСЂРёРІСЏР·РєРё СЃРѕС†СЃРµС‚РµР№
---------------------

1. РџР»Р°РіРёРЅ РїРѕРґРґРµСЂР¶РёРІР°РµС‚ РїСЂРёРІСЏР·РєСѓ СЃРѕС†СЃРµС‚РµР№: Р’РєРѕРЅС‚Р°РєС‚Рµ, Facebook, Google Plus, Instagram

2. РџСЂРёРІСЏР·РєР° РїРѕР·РІРѕР»СЏРµС‚ РїРѕР»СЊР·РѕРІР°С‚РµР»СЋ РїСЂРё РґРѕР±Р°РІР»РµРЅРёРё Р·Р°РїРёСЃРё РЅР°Р¶Р°С‚СЊ СЃРѕРѕС‚РІРµС‚СЃС‚РІСѓСЋС€СѓСЋ РєРЅРѕРїРєСѓ Рё РїСЂРѕР№С‚Рё Р°РІС‚РѕСЂРёР·Р°С†РёСЋ

3. РџРѕСЃР»Рµ РґРѕР±Р°РІР»РµРЅРёСЏ Р·Р°РїРёСЃРё Р±СѓРґСѓС‚ РѕС‚РѕР±СЂР°Р¶Р°С‚СЊСЃСЏ Р°РІР°С‚Р°СЂРєР° РёР· СЃРѕС†РёР°Р»СЊРЅРѕР№ СЃРµС‚Рё Рё СЃСЃС‹Р»РєР° РЅР° РїСЂРѕС„РёР»СЊ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ

Р РµРіРёСЃС‚СЂР°С†РёСЏ РїСЂРёР»РѕР¶РµРЅРёР№
---------------------

Р”Р»СЏ РєР°Р¶РґРѕР№ СЃРѕС†РёР°Р»СЊРЅРѕР№ СЃРµС‚Рё РЅСѓР¶РЅРѕ РѕС‚РґРµР»СЊРЅРѕ СЂРµРіРёСЃС‚СЂРёСЂРѕРІР°С‚СЊ РїСЂРёР»РѕР¶РµРЅРёРµ, Р° Р·Р°С‚РµРј СѓРєР°Р·Р°С‚СЊ РІ РЅР°СЃС‚СЂРѕР№РєР°С… РїРѕР»СѓС‡РµРЅРЅС‹Рµ Client ID Рё Client Secret

Р’РєРѕРЅС‚Р°РєС‚Рµ:

- Р·Р°Р»РѕРіРёРЅРёС‚СЊСЃСЏ РІ СЃРІРѕР№ Р°РєРєР°СѓРЅС‚
- РїРµСЂРµР№С‚Рё РїРѕ СЃСЃС‹Р»РєРµ: http://vk.com/editapp?act=create
- СѓРєР°Р·Р°С‚СЊ РЅР°Р·РІР°РЅРёРµ РїСЂРёР»РѕР¶РµРЅРёСЏ (РїРѕ Р¶РµР»Р°РЅРёСЋ), Р°РґСЂРµСЃ СЃР°Р№С‚Р°, С‚РёРї РїСЂРёР»РѕР¶РµРЅРёСЏ - РІРµР±СЃР°Р№С‚
- РїСЂРѕР№С‚Рё РЎРњРЎ-РїРѕРґС‚РІРµСЂР¶РґРµРЅРёРµ
- РїРѕР»СѓС‡РёС‚СЊ Рё СЃРєРѕРїРёСЂРѕРІР°С‚СЊ Client ID Рё Client Secret

Facebook:

- Р·Р°Р»РѕРіРёРЅРёС‚СЊСЃСЏ РІ СЃРІРѕР№ Р°РєРєР°СѓРЅС‚
- РїРµСЂРµР№С‚Рё РїРѕ СЃСЃС‹Р»РєРµ: https://developers.facebook.com/apps
- РЅР°Р¶Р°С‚СЊ "Add new app" Рё РІРѕ РІСЃРїР»С‹РІР°СЋС‰РµРј РѕРєРЅРµ РЅР°Р¶Р°С‚СЊ РІРЅРёР·Сѓ Advanced setup
- СѓРєР°Р·Р°С‚СЊ РёРјСЏ (РїРѕ Р¶РµР»Р°РЅРёСЋ), РєР°С‚РµРіРѕСЂРёСЏ - РћР±С‰РµРЅРёРµ
- РІ Р»РµРІРѕРј РјРµРЅСЋ РІС‹Р±СЂР°С‚СЊ Settings Рё Р·Р°РїРѕР»РЅРёС‚СЊ РїРѕР»Рµ Contact Email
- РѕСЃС‚Р°РІР°СЏСЃСЊ РЅР° СЃС‚СЂР°РЅРёС†Рµ Settings, РЅР°Р¶Р°С‚СЊ Add Platform, РІС‹Р±СЂР°С‚СЊ Website, СѓРєР°Р·Р°С‚СЊ Р°РґСЂРµСЃ РІР°С€РµРіРѕ СЃР°Р№С‚Р°
- РІ Р»РµРІРѕРј РјРµРЅСЋ РІС‹Р±СЂР°С‚СЊ App Details, СѓРєР°Р·Р°С‚СЊ User Support Email
- РІ Р»РµРІРѕРј РјРµРЅСЋ РІС‹Р±СЂР°С‚СЊ Status & Review, РїРѕСЃС‚Р°РІРёС‚СЊ РіР°Р»РѕС‡РєСѓ "Make this app available to the general public"
- РІ Р»РµРІРѕРј РјРµРЅСЋ РІС‹Р±СЂР°С‚СЊ Dashboard
- РїРѕР»СѓС‡РёС‚СЊ Рё СЃРєРѕРїРёСЂРѕРІР°С‚СЊ Client ID Рё Client Secret

Google:

- Р·Р°Р»РѕРіРёРЅРёС‚СЊСЃСЏ РІ СЃРІРѕР№ Р°РєРєР°СѓРЅС‚
- РїРµСЂРµР№С‚Рё РїРѕ СЃСЃС‹Р»РєРµ: https://console.developers.google.com/project
- РЅР°Р¶Р°С‚СЊ Create new project, РёРјСЏ СѓРєР°Р·Р°С‚СЊ РїРѕ Р¶РµР»Р°РЅРёСЋ
- РґРѕР¶РґР°С‚СЊСЃСЏ СЃРѕРѕР±С‰РµРЅРёСЏ РѕР± СѓСЃРїРµС€РЅРѕРј СЃРѕР·РґР°РЅРёРё РїСЂРѕРµРєС‚Р°
- РЅР°Р¶Р°С‚СЊ Enable & manage API's
- РЅР°Р¶Р°С‚СЊ Google+ API, РЅР° РѕС‚РєСЂС‹РІС€РµР№СЃСЏ СЃС‚СЂР°РЅРёС†Рµ РЅР°Р¶Р°С‚СЊ Enable API
- РІ Р»РµРІРѕРј РјРµРЅСЋ РІС‹Р±СЂР°С‚СЊ Credentials Р·Р°С‚РµРј РІРєР»Р°РґРєСѓ OAuth consent screen
- СѓРєР°Р·Р°С‚СЊ РЅР°Р·РІР°РЅРёРµ (РїРѕ Р¶РµР»Р°РЅРёСЋ), СЃРѕС…СЂР°РЅРёС‚СЊ РёР·РјРµРЅРµРЅРёСЏ
- РїРѕСЏРІРёС‚СЃСЏ РѕРєРЅРѕ СЃ РєРЅРѕРїРєРѕР№ Create new credentials - РЅР°Р¶Р°С‚СЊ Рё РІС‹Р±СЂР°С‚СЊ OAuth CLient ID
- РІС‹Р±СЂР°С‚СЊ С‚РёРї: Web application, РЅР°Р·РІР°РЅРёРµ СѓРєР°Р·Р°С‚СЊ РїРѕ Р¶РµР»Р°РЅРёСЋ
- РІ РїРѕР»Рµ Authorized redirect URIs СѓРєР°Р·Р°С‚СЊ: http://example.com/engine/plugins/guestbook/lib/hybridauth/?hauth.done=Google
- РІ СЃР»РµРґСѓСЋС‰РµР№ СЃС‚СЂРѕРєРµ СЌС‚РѕРіРѕ Р¶Рµ РїРѕР»СЏ - РїСЂРѕРґСѓР±Р»РёСЂРѕРІР°С‚СЊ РІС‹С€РµСѓРєР°Р·Р°РЅРЅСѓСЋ Р·Р°РїРёСЃСЊ СЃ www
- РїРѕР»СѓС‡РёС‚СЊ Рё СЃРєРѕРїРёСЂРѕРІР°С‚СЊ Client ID Рё Client Secret

Instagram:

- Р·Р°Р»РѕРіРёРЅРёС‚СЊСЃСЏ РІ СЃРІРѕР№ Р°РєРєР°СѓРЅС‚
- РїРµСЂРµР№С‚Рё РїРѕ СЃСЃС‹Р»РєРµ: https://instagram.com/developer/clients/manage/
- РЅР°Р¶Р°С‚СЊ Register new client
- СѓРєР°Р·Р°С‚СЊ РЅР°Р·РІР°РЅРёРµ Рё РѕРїРёСЃР°РЅРёРµ (РїРѕ Р¶РµР»Р°РЅРёСЋ), Р°РґСЂРµСЃ СЃР°Р№С‚Р°, Privacy policy URL, Contact Email
- РІ РїРѕР»Рµ Valid redirect URI СѓРєР°Р·Р°С‚СЊ: http://example.com/engine/plugins/guestbook/lib/hybridauth/?hauth.done=Instagram
- РІ СЃР»РµРґСѓСЋС‰РµР№ СЃС‚СЂРѕРєРµ СЌС‚РѕРіРѕ Р¶Рµ РїРѕР»СЏ - РїСЂРѕРґСѓР±Р»РёСЂРѕРІР°С‚СЊ РІС‹С€РµСѓРєР°Р·Р°РЅРЅСѓСЋ Р·Р°РїРёСЃСЊ СЃ www
- РїРѕР»СѓС‡РёС‚СЊ Рё СЃРєРѕРїРёСЂРѕРІР°С‚СЊ Client ID Рё Client Secret
- РґР»СЏ С‚РѕРіРѕ, С‡С‚РѕР±С‹ РІС‹Р№С‚Рё РёР· СЂРµР¶РёРјР° РїРµСЃРѕС‡РЅРёС†С‹ (Sandbox Mode) - РЅР°Р¶Р°С‚СЊ Permissions Рё РѕС‚РїСЂР°РІРёС‚СЊ РїСЂРёР»РѕР¶РµРЅРёРµ РЅР° СЂР°СЃСЃРјРѕС‚СЂРµРЅРёРµ (Submit for review)
